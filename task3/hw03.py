import sys
from pathlib import Path
from colorama import Fore, Style, init

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è colorama - –¥–∞—é –Ω–∞—à–æ–º—É —Ç–µ–∫—Å—Ç—É –∫–æ–ª—å–æ—Ä—É, —â–æ–± –±—É–ª–æ –≤–µ—Å–µ–ª—ñ—à–µ
init(autoreset=True)

def print_directory_structure(directory, indent="", is_root=True):
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—é, —á–∏ —ñ—Å–Ω—É—î —Ü—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è —ñ —á–∏ –≤–æ–Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—è, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞
    if not directory.exists() or not directory.is_dir():
        print(Fore.RED + f"–ü–æ–º–∏–ª–∫–∞: '{directory}' –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é –∞–±–æ –Ω–µ —ñ—Å–Ω—É—î.")
        return
    
    dirs = []  # –°—é–¥–∏ —Å–∫–ª–∞–¥–∞—Ç–∏–º—É –Ω–∞—à—ñ –∫–∞—Ç–∞–ª–æ–≥–∏
    files = []  # –ê –æ—Å—å —Ç—É—Ç –±—É–¥—É—Ç—å —Ñ–∞–π–ª–∏
    
    # –ü–µ—Ä—à–µ, —â–æ —è —Ä–æ–±–ª—é - –∑–±–∏—Ä–∞—é –≤—Å—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –ø–∞–ø–∫–∏, —â–æ–± –º–∞—Ç–∏ —á—ñ—Ç–∫–µ —É—è–≤–ª–µ–Ω–Ω—è
    for item in sorted(directory.iterdir()):
        if item.is_dir():
            dirs.append(item)  # –ü–∞–ø–∫–∏ –π–¥—É—Ç—å –≤ –æ–¥–∏–Ω —Å–ø–∏—Å–æ–∫
        else:
            files.append(item)  # –§–∞–π–ª–∏ - –≤ —ñ–Ω—à–∏–π —Å–ø–∏—Å–æ–∫
    
    # –í–∏–≤–æ–¥–∂—É –ø–µ—Ä—à—É –ø–∞–ø–∫—É –±–µ–∑ –≤—ñ–¥—Å—Ç—É–ø—ñ–≤, –±–æ –≤–æ–Ω–∞ –Ω–∞–π–≥–æ–ª–æ–≤–Ω—ñ—à–∞
    if is_root:
        print(Fore.GREEN + f"üì¶{directory.name}")
    
    # –¢–µ–ø–µ—Ä –≤–∏–≤–æ–¥–∂—É –≤—Å—ñ –ø–∞–ø–∫–∏, –¥–æ–¥–∞—é—á–∏ –≤—ñ–¥—Å—Ç—É–ø–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó
    for item in dirs:
        print(indent + " ‚î£ üìÇ" + item.name)
        # –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø—Ä–æ–¥–æ–≤–∂—É—é –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ü—ñ—î—é –ø–∞–ø–∫–æ—é, –∑–∞–Ω—É—Ä—é—é—á–∏—Å—å –≥–ª–∏–±—à–µ
        print_directory_structure(item, indent + " ‚îÉ ", is_root=False)
    
    # –û—Å—å —ñ —Ñ–∞–π–ª–∏! –í–∏–≤–æ–¥–∂—É —ó—Ö —Ç–µ–∂ –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏ —Ç–∞ –ª—ñ–Ω—ñ—è–º–∏
    for idx, item in enumerate(files):
        prefix = " ‚îó üìú" if idx == len(files) - 1 else " ‚î£ üìú"  # –û—Å—å —Ç—É—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è—é, —á–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ñ–∞–π–ª
        print(indent + prefix + item.name)

def main():
    # –í–∫–∞–∑—É—é —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, —è–∫—É —è —Ö–æ—á—É –≤–∏–≤–µ—Å—Ç–∏ (—Ü–µ –º–æ—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥—É)
    directory_path = Path("/Users/aleksej/projects/goit-pycore-hw-04/task3/test_directory/picture")
    
    # –í–∏–∫–ª–∏–∫–∞—é —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ–± –ø–æ–±—É–¥—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó (–∫—Ä–æ–∫ –¥–æ –º–µ—Ç–∏!)
    print_directory_structure(directory_path)

if __name__ == "__main__":
    main()  # –Ü –æ—Å—å —è –∑–∞–ø—É—Å–∫–∞—é –≤—Å—é —Ü—é –∫—Ä–∞—Å—É!
